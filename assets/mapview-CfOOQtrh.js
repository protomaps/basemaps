import{r as Bt,d as Kn,c as U,p as Jn,a as G,b as Le,e as Wn,l as Zn,t as B,i as $,N as Yn,S as Se,f as be,F as Je,g as lt,o as Xn,V as Qn,h as er,u as Ot,s as tr}from"./utils-DDxLlqhC.js";import{l as At,x as jt,V as nr,n as rr,m as ne,a as sr,S as ir}from"./index-BzZ6WH-p.js";var Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rt(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Pe={exports:{}};Pe.exports;var Pt;function ar(){return Pt||(Pt=1,function(n,a){var c=200,i="__lodash_hash_undefined__",d=1,b=2,v=9007199254740991,x="[object Arguments]",T="[object Array]",D="[object AsyncFunction]",J="[object Boolean]",W="[object Date]",Q="[object Error]",j="[object Function]",V="[object GeneratorFunction]",q="[object Map]",R="[object Number]",re="[object Null]",g="[object Object]",f="[object Promise]",S="[object Proxy]",E="[object RegExp]",O="[object Set]",r="[object String]",o="[object Symbol]",l="[object Undefined]",u="[object WeakMap]",h="[object ArrayBuffer]",y="[object DataView]",C="[object Float32Array]",ee="[object Float64Array]",se="[object Int8Array]",m="[object Int16Array]",P="[object Int32Array]",k="[object Uint8Array]",de="[object Uint8ClampedArray]",Ee="[object Uint16Array]",ke="[object Uint32Array]",We=/[\\^$.*+?()[\]{}|]/g,Be=/^\[object .+?Constructor\]$/,je=/^(?:0|[1-9]\d*)$/,M={};M[C]=M[ee]=M[se]=M[m]=M[P]=M[k]=M[de]=M[Ee]=M[ke]=!0,M[x]=M[T]=M[h]=M[J]=M[y]=M[W]=M[Q]=M[j]=M[q]=M[R]=M[g]=M[E]=M[O]=M[r]=M[u]=!1;var ye=typeof Ke=="object"&&Ke&&Ke.Object===Object&&Ke,Re=typeof self=="object"&&self&&self.Object===Object&&self,Z=ye||Re||Function("return this")(),Ce=a&&!a.nodeType&&a,$e=Ce&&!0&&n&&!n.nodeType&&n,we=$e&&$e.exports===Ce,ae=we&&ye.process,w=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),F=w&&w.isTypedArray;function ce(e,t){for(var s=-1,p=e==null?0:e.length,A=0,_=[];++s<p;){var L=e[s];t(L,s,e)&&(_[A++]=L)}return _}function Ne(e,t){for(var s=-1,p=t.length,A=e.length;++s<p;)e[A+s]=t[s];return e}function Nt(e,t){for(var s=-1,p=e==null?0:e.length;++s<p;)if(t(e[s],s,e))return!0;return!1}function Ht(e,t){for(var s=-1,p=Array(e);++s<e;)p[s]=t(s);return p}function Dt(e){return function(t){return e(t)}}function Ft(e,t){return e.has(t)}function zt(e,t){return e==null?void 0:e[t]}function Gt(e){var t=-1,s=Array(e.size);return e.forEach(function(p,A){s[++t]=[A,p]}),s}function Vt(e,t){return function(s){return e(t(s))}}function qt(e){var t=-1,s=Array(e.size);return e.forEach(function(p){s[++t]=p}),s}var Ut=Array.prototype,Kt=Function.prototype,He=Object.prototype,Ze=Z["__core-js_shared__"],ut=Kt.toString,ie=He.hasOwnProperty,pt=function(){var e=/[^.]+$/.exec(Ze&&Ze.keys&&Ze.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ft=He.toString,Jt=RegExp("^"+ut.call(ie).replace(We,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dt=we?Z.Buffer:void 0,De=Z.Symbol,ht=Z.Uint8Array,gt=He.propertyIsEnumerable,Wt=Ut.splice,he=De?De.toStringTag:void 0,mt=Object.getOwnPropertySymbols,Zt=dt?dt.isBuffer:void 0,Yt=Vt(Object.keys,Object),Ye=xe(Z,"DataView"),Te=xe(Z,"Map"),Xe=xe(Z,"Promise"),Qe=xe(Z,"Set"),et=xe(Z,"WeakMap"),Me=xe(Object,"create"),Xt=_e(Ye),Qt=_e(Te),en=_e(Xe),tn=_e(Qe),nn=_e(et),_t=De?De.prototype:void 0,tt=_t?_t.valueOf:void 0;function ge(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var p=e[t];this.set(p[0],p[1])}}function rn(){this.__data__=Me?Me(null):{},this.size=0}function sn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function an(e){var t=this.__data__;if(Me){var s=t[e];return s===i?void 0:s}return ie.call(t,e)?t[e]:void 0}function on(e){var t=this.__data__;return Me?t[e]!==void 0:ie.call(t,e)}function ln(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=Me&&t===void 0?i:t,this}ge.prototype.clear=rn,ge.prototype.delete=sn,ge.prototype.get=an,ge.prototype.has=on,ge.prototype.set=ln;function oe(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var p=e[t];this.set(p[0],p[1])}}function cn(){this.__data__=[],this.size=0}function un(e){var t=this.__data__,s=ze(t,e);if(s<0)return!1;var p=t.length-1;return s==p?t.pop():Wt.call(t,s,1),--this.size,!0}function pn(e){var t=this.__data__,s=ze(t,e);return s<0?void 0:t[s][1]}function fn(e){return ze(this.__data__,e)>-1}function dn(e,t){var s=this.__data__,p=ze(s,e);return p<0?(++this.size,s.push([e,t])):s[p][1]=t,this}oe.prototype.clear=cn,oe.prototype.delete=un,oe.prototype.get=pn,oe.prototype.has=fn,oe.prototype.set=dn;function me(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var p=e[t];this.set(p[0],p[1])}}function hn(){this.size=0,this.__data__={hash:new ge,map:new(Te||oe),string:new ge}}function gn(e){var t=Ge(this,e).delete(e);return this.size-=t?1:0,t}function mn(e){return Ge(this,e).get(e)}function _n(e){return Ge(this,e).has(e)}function vn(e,t){var s=Ge(this,e),p=s.size;return s.set(e,t),this.size+=s.size==p?0:1,this}me.prototype.clear=hn,me.prototype.delete=gn,me.prototype.get=mn,me.prototype.has=_n,me.prototype.set=vn;function Fe(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new me;++t<s;)this.add(e[t])}function bn(e){return this.__data__.set(e,i),this}function yn(e){return this.__data__.has(e)}Fe.prototype.add=Fe.prototype.push=bn,Fe.prototype.has=yn;function ue(e){var t=this.__data__=new oe(e);this.size=t.size}function wn(){this.__data__=new oe,this.size=0}function xn(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}function Sn(e){return this.__data__.get(e)}function Cn(e){return this.__data__.has(e)}function $n(e,t){var s=this.__data__;if(s instanceof oe){var p=s.__data__;if(!Te||p.length<c-1)return p.push([e,t]),this.size=++s.size,this;s=this.__data__=new me(p)}return s.set(e,t),this.size=s.size,this}ue.prototype.clear=wn,ue.prototype.delete=xn,ue.prototype.get=Sn,ue.prototype.has=Cn,ue.prototype.set=$n;function Tn(e,t){var s=Ve(e),p=!s&&Fn(e),A=!s&&!p&&nt(e),_=!s&&!p&&!A&&Tt(e),L=s||p||A||_,N=L?Ht(e.length,String):[],H=N.length;for(var I in e)ie.call(e,I)&&!(L&&(I=="length"||A&&(I=="offset"||I=="parent")||_&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||jn(I,H)))&&N.push(I);return N}function ze(e,t){for(var s=e.length;s--;)if(xt(e[s][0],t))return s;return-1}function Mn(e,t,s){var p=t(e);return Ve(e)?p:Ne(p,s(e))}function Oe(e){return e==null?e===void 0?l:re:he&&he in Object(e)?kn(e):Dn(e)}function vt(e){return Ae(e)&&Oe(e)==x}function bt(e,t,s,p,A){return e===t?!0:e==null||t==null||!Ae(e)&&!Ae(t)?e!==e&&t!==t:On(e,t,s,p,bt,A)}function On(e,t,s,p,A,_){var L=Ve(e),N=Ve(t),H=L?T:pe(e),I=N?T:pe(t);H=H==x?g:H,I=I==x?g:I;var K=H==g,te=I==g,z=H==I;if(z&&nt(e)){if(!nt(t))return!1;L=!0,K=!1}if(z&&!K)return _||(_=new ue),L||Tt(e)?yt(e,t,s,p,A,_):Ln(e,t,H,s,p,A,_);if(!(s&d)){var Y=K&&ie.call(e,"__wrapped__"),X=te&&ie.call(t,"__wrapped__");if(Y||X){var fe=Y?e.value():e,le=X?t.value():t;return _||(_=new ue),A(fe,le,s,p,_)}}return z?(_||(_=new ue),En(e,t,s,p,A,_)):!1}function An(e){if(!$t(e)||Nn(e))return!1;var t=St(e)?Jt:Be;return t.test(_e(e))}function Pn(e){return Ae(e)&&Ct(e.length)&&!!M[Oe(e)]}function In(e){if(!Hn(e))return Yt(e);var t=[];for(var s in Object(e))ie.call(e,s)&&s!="constructor"&&t.push(s);return t}function yt(e,t,s,p,A,_){var L=s&d,N=e.length,H=t.length;if(N!=H&&!(L&&H>N))return!1;var I=_.get(e);if(I&&_.get(t))return I==t;var K=-1,te=!0,z=s&b?new Fe:void 0;for(_.set(e,t),_.set(t,e);++K<N;){var Y=e[K],X=t[K];if(p)var fe=L?p(X,Y,K,t,e,_):p(Y,X,K,e,t,_);if(fe!==void 0){if(fe)continue;te=!1;break}if(z){if(!Nt(t,function(le,ve){if(!Ft(z,ve)&&(Y===le||A(Y,le,s,p,_)))return z.push(ve)})){te=!1;break}}else if(!(Y===X||A(Y,X,s,p,_))){te=!1;break}}return _.delete(e),_.delete(t),te}function Ln(e,t,s,p,A,_,L){switch(s){case y:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case h:return!(e.byteLength!=t.byteLength||!_(new ht(e),new ht(t)));case J:case W:case R:return xt(+e,+t);case Q:return e.name==t.name&&e.message==t.message;case E:case r:return e==t+"";case q:var N=Gt;case O:var H=p&d;if(N||(N=qt),e.size!=t.size&&!H)return!1;var I=L.get(e);if(I)return I==t;p|=b,L.set(e,t);var K=yt(N(e),N(t),p,A,_,L);return L.delete(e),K;case o:if(tt)return tt.call(e)==tt.call(t)}return!1}function En(e,t,s,p,A,_){var L=s&d,N=wt(e),H=N.length,I=wt(t),K=I.length;if(H!=K&&!L)return!1;for(var te=H;te--;){var z=N[te];if(!(L?z in t:ie.call(t,z)))return!1}var Y=_.get(e);if(Y&&_.get(t))return Y==t;var X=!0;_.set(e,t),_.set(t,e);for(var fe=L;++te<H;){z=N[te];var le=e[z],ve=t[z];if(p)var Mt=L?p(ve,le,z,t,e,_):p(le,ve,z,e,t,_);if(!(Mt===void 0?le===ve||A(le,ve,s,p,_):Mt)){X=!1;break}fe||(fe=z=="constructor")}if(X&&!fe){var qe=e.constructor,Ue=t.constructor;qe!=Ue&&"constructor"in e&&"constructor"in t&&!(typeof qe=="function"&&qe instanceof qe&&typeof Ue=="function"&&Ue instanceof Ue)&&(X=!1)}return _.delete(e),_.delete(t),X}function wt(e){return Mn(e,Vn,Bn)}function Ge(e,t){var s=e.__data__;return Rn(t)?s[typeof t=="string"?"string":"hash"]:s.map}function xe(e,t){var s=zt(e,t);return An(s)?s:void 0}function kn(e){var t=ie.call(e,he),s=e[he];try{e[he]=void 0;var p=!0}catch{}var A=ft.call(e);return p&&(t?e[he]=s:delete e[he]),A}var Bn=mt?function(e){return e==null?[]:(e=Object(e),ce(mt(e),function(t){return gt.call(e,t)}))}:qn,pe=Oe;(Ye&&pe(new Ye(new ArrayBuffer(1)))!=y||Te&&pe(new Te)!=q||Xe&&pe(Xe.resolve())!=f||Qe&&pe(new Qe)!=O||et&&pe(new et)!=u)&&(pe=function(e){var t=Oe(e),s=t==g?e.constructor:void 0,p=s?_e(s):"";if(p)switch(p){case Xt:return y;case Qt:return q;case en:return f;case tn:return O;case nn:return u}return t});function jn(e,t){return t=t??v,!!t&&(typeof e=="number"||je.test(e))&&e>-1&&e%1==0&&e<t}function Rn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Nn(e){return!!pt&&pt in e}function Hn(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||He;return e===s}function Dn(e){return ft.call(e)}function _e(e){if(e!=null){try{return ut.call(e)}catch{}try{return e+""}catch{}}return""}function xt(e,t){return e===t||e!==e&&t!==t}var Fn=vt(function(){return arguments}())?vt:function(e){return Ae(e)&&ie.call(e,"callee")&&!gt.call(e,"callee")},Ve=Array.isArray;function zn(e){return e!=null&&Ct(e.length)&&!St(e)}var nt=Zt||Un;function Gn(e,t){return bt(e,t)}function St(e){if(!$t(e))return!1;var t=Oe(e);return t==j||t==V||t==D||t==S}function Ct(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=v}function $t(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Ae(e){return e!=null&&typeof e=="object"}var Tt=F?Dt(F):Pn;function Vn(e){return zn(e)?Tn(e):In(e)}function qn(){return[]}function Un(){return!1}n.exports=Gn}(Pe,Pe.exports)),Pe.exports}var or=ar(),lr=Rt(or);function st(n,a,c){const i={id:[a,c,"circle"].join("_"),source:a,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return c&&(i["source-layer"]=c),i}function it(n,a,c,i){const d={id:[c,i,"polygon"].join("_"),source:c,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(d["source-layer"]=i),d}function at(n,a,c){const i={id:[a,c,"line"].join("_"),source:a,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return c&&(i["source-layer"]=c),i}function cr(n,a){const c=[],i=[],d=[];function b(v){return{circle:a(v,.8),line:a(v,.6),polygon:a(v,.3),polygonOutline:a(v,.6),default:a(v,1)}}return Object.keys(n).forEach(v=>{const x=n[v];if(!x||x.length===0){const T=b(v);i.push(st(T.circle,v)),d.push(at(T.line,v)),c.push(it(T.polygon,T.polygonOutline,v))}else x.forEach(T=>{const D=b(T);i.push(st(D.circle,v,T)),d.push(at(D.line,v,T)),c.push(it(D.polygon,D.polygonOutline,v,T))})}),c.concat(d).concat(i)}function ur(n,a,c){c=Object.assign({backgroundColor:"#fff"},c);const i={id:"background",type:"background",paint:{"background-color":c.backgroundColor}},d={};return Object.keys(n.sources).forEach(b=>{const v=n.sources[b];(v.type==="vector"||v.type==="geojson")&&(d[b]=v)}),Object.assign(n,{layers:[i].concat(a),sources:d})}var It={polygonLayer:it,lineLayer:at,circleLayer:st,generateInspectStyle:ur,generateColoredLayers:cr};class pr{constructor(a){a=Object.assign({show:!0,onToggle(){}},a),this._btn=this.createButton(),this._btn.onclick=a.onToggle,this.elem=this.createContainer(this._btn,a.show)}createButton(){const a=document.createElement("button");return a.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",a.type="button",a.title="Toggle Inspect",a.setAttribute("aria-label","Toggle Inspect"),a}createContainer(a,c){const i=document.createElement("div");return i.className="maplibregl-ctrl maplibregl-ctrl-group",i.appendChild(a),c||(i.style.display="none"),i}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function fr(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function rt(n,a){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${fr(a)}</div></div>`}function dr(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function hr(n){const a=dr(n.layer["source-layer"]||n.layer.source),c=rt("$id",n.id),i=rt("$type",n.geometry.type),d=Object.keys(n.properties).map(b=>rt(b,n.properties[b]));return[a,c,i].concat(d).join("")}function gr(n){return n.map(a=>`<div class="maplibregl-inspect_feature">${hr(a)}</div>`).join("")}function mr(n){return`<div class="maplibregl-inspect_popup">${gr(n)}</div>`}var Ie={exports:{}},_r=Ie.exports,Lt;function vr(){return Lt||(Lt=1,function(n,a){(function(c,i){{var d=i();n.exports&&(a=n.exports=d),a.randomColor=d}})(_r,function(){var c=null,i={};re();var d=[],b=function(r){if(r=r||{},r.seed!==void 0&&r.seed!==null&&r.seed===parseInt(r.seed,10))c=r.seed;else if(typeof r.seed=="string")c=E(r.seed);else{if(r.seed!==void 0&&r.seed!==null)throw new TypeError("The seed value must be an integer or string");c=null}var o,l,u;if(r.count!==null&&r.count!==void 0){for(var h=r.count,y=[],C=0;C<r.count;C++)d.push(!1);for(r.count=null;h>y.length;){var ee=b(r);c!==null&&(r.seed=c),y.push(ee)}return r.count=h,y}return o=v(r),l=x(o,r),u=T(o,l,r),D([o,l,u],r)};function v(r){if(d.length>0){var o=O(r.hue),l=V(o),u=(o[1]-o[0])/d.length,h=parseInt((l-o[0])/u);d[h]===!0?h=(h+2)%d.length:d[h]=!0;var y=(o[0]+h*u)%359,C=(o[0]+(h+1)*u)%359;return o=[y,C],l=V(o),l<0&&(l=360+l),l}else{var o=W(r.hue);return l=V(o),l<0&&(l=360+l),l}}function x(r,o){if(o.hue==="monochrome")return 0;if(o.luminosity==="random")return V([0,100]);var l=Q(r),u=l[0],h=l[1];switch(o.luminosity){case"bright":u=55;break;case"dark":u=h-10;break;case"light":h=55;break}return V([u,h])}function T(r,o,l){var u=J(r,o),h=100;switch(l.luminosity){case"dark":h=u+20;break;case"light":u=(h+u)/2;break;case"random":u=0,h=100;break}return V([u,h])}function D(r,o){switch(o.format){case"hsvArray":return r;case"hslArray":return S(r);case"hsl":var l=S(r);return"hsl("+l[0]+", "+l[1]+"%, "+l[2]+"%)";case"hsla":var u=S(r),C=o.alpha||Math.random();return"hsla("+u[0]+", "+u[1]+"%, "+u[2]+"%, "+C+")";case"rgbArray":return g(r);case"rgb":var h=g(r);return"rgb("+h.join(", ")+")";case"rgba":var y=g(r),C=o.alpha||Math.random();return"rgba("+y.join(", ")+", "+C+")";default:return q(r)}}function J(r,o){for(var l=j(r).lowerBounds,u=0;u<l.length-1;u++){var h=l[u][0],y=l[u][1],C=l[u+1][0],ee=l[u+1][1];if(o>=h&&o<=C){var se=(ee-y)/(C-h),m=y-se*h;return se*o+m}}return 0}function W(r){if(typeof parseInt(r)=="number"){var o=parseInt(r);if(o<360&&o>0)return[o,o]}if(typeof r=="string"){if(i[r]){var l=i[r];if(l.hueRange)return l.hueRange}else if(r.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var u=f(r)[0];return[u,u]}}return[0,360]}function Q(r){return j(r).saturationRange}function j(r){r>=334&&r<=360&&(r-=360);for(var o in i){var l=i[o];if(l.hueRange&&r>=l.hueRange[0]&&r<=l.hueRange[1])return i[o]}return"Color not found"}function V(r){if(c===null){var o=.618033988749895,l=Math.random();return l+=o,l%=1,Math.floor(r[0]+l*(r[1]+1-r[0]))}else{var u=r[1]||1,h=r[0]||0;c=(c*9301+49297)%233280;var y=c/233280;return Math.floor(h+y*(u-h))}}function q(r){var o=g(r);function l(h){var y=h.toString(16);return y.length==1?"0"+y:y}var u="#"+l(o[0])+l(o[1])+l(o[2]);return u}function R(r,o,l){var u=l[0][0],h=l[l.length-1][0],y=l[l.length-1][1],C=l[0][1];i[r]={hueRange:o,lowerBounds:l,saturationRange:[u,h],brightnessRange:[y,C]}}function re(){R("monochrome",null,[[0,0],[100,0]]),R("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),R("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),R("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),R("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),R("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),R("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),R("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function g(r){var o=r[0];o===0&&(o=1),o===360&&(o=359),o=o/360;var l=r[1]/100,u=r[2]/100,h=Math.floor(o*6),y=o*6-h,C=u*(1-l),ee=u*(1-y*l),se=u*(1-(1-y)*l),m=256,P=256,k=256;switch(h){case 0:m=u,P=se,k=C;break;case 1:m=ee,P=u,k=C;break;case 2:m=C,P=u,k=se;break;case 3:m=C,P=ee,k=u;break;case 4:m=se,P=C,k=u;break;case 5:m=u,P=C,k=ee;break}var de=[Math.floor(m*255),Math.floor(P*255),Math.floor(k*255)];return de}function f(r){r=r.replace(/^#/,""),r=r.length===3?r.replace(/(.)/g,"$1$1"):r;var o=parseInt(r.substr(0,2),16)/255,l=parseInt(r.substr(2,2),16)/255,u=parseInt(r.substr(4,2),16)/255,h=Math.max(o,l,u),y=h-Math.min(o,l,u),C=h?y/h:0;switch(h){case o:return[60*((l-u)/y%6)||0,C,h];case l:return[60*((u-o)/y+2)||0,C,h];case u:return[60*((o-l)/y+4)||0,C,h]}}function S(r){var o=r[0],l=r[1]/100,u=r[2]/100,h=(2-l)*u;return[o,Math.round(l*u/(h<1?h:2-h)*1e4)/100,h/2*100]}function E(r){for(var o=0,l=0;l!==r.length&&!(o>=Number.MAX_SAFE_INTEGER);l++)o+=r.charCodeAt(l);return o}function O(r){if(isNaN(r)){if(typeof r=="string"){if(i[r]){var l=i[r];if(l.hueRange)return l.hueRange}else if(r.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var u=f(r)[0];return j(u).hueRange}}}else{var o=parseInt(r);if(o<360&&o>0)return j(r).hueRange}return[0,360]}return b})}(Ie,Ie.exports)),Ie.exports}var br=vr(),yr=Rt(br);function wr(n,a){let c="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(c="dark"),/earth/.test(n)&&(c="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${yr({luminosity:c,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${a||"1"})`}var xr={brightColor:wr};function Sr(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function Cr(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class ct{constructor(a){if(this._onSourceChange=i=>{if(i.sourceDataType==="visibility"||!i.isSourceLoaded)return;const d=Object.assign({},this.sources);this._setSourcesFromMap(),!lr(d,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const i=this._map.getStyle();Sr(i)||(this._originalStyle=i)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=i=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||i.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;i.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||i.type==="mousemove"&&!this.options.showMapPopupOnHover)return;i.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let d;this.options.selectThreshold===0?d=i.point:d=[[i.point.x-this.options.selectThreshold,i.point.y+this.options.selectThreshold],[i.point.x+this.options.selectThreshold,i.point.y-this.options.selectThreshold]];const b=this._map.queryRenderedFeatures(d,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=b.length?"pointer":"",!b.length)this._popup.remove();else{this._popup.setLngLat(i.lngLat);const v=this.options.renderPopup(b);typeof v=="string"?this._popup.setHTML(v):this._popup.setDOMContent(v),this._popup.addTo(this._map)}}},!(this instanceof ct))throw new Error("MaplibreInspect needs to be called with the new keyword");let c=null;window.maplibregl?c=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):a.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:xr.brightColor,buildInspectStyle:It.generateInspectStyle,renderPopup:mr,popup:c,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},a),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new pr({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const a=It.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),a,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(Cr(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const a=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(c=>{const i=this._map.style.sourceCaches[c]||{_source:{}},d=i._source.vectorLayerIds;d?this.sources[c]=d:i._source.type==="geojson"&&(this.sources[c]=[])}),Object.keys(this.sources).forEach(c=>{a.indexOf(c)===-1&&delete this.sources[c]})}setOriginalStyle(a){this._originalStyle=a,this._setSourcesFromMap()}onAdd(a){return this._map=a,Object.keys(this.sources).length===0&&(a.on("tiledata",this._onSourceChange),a.on("sourcedata",this._onSourceChange)),a.on("styledata",this._onStyleChange),a.on("load",this._onStyleChange),a.on("mousemove",this._onMousemove),a.on("click",this._onMousemove),a.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const a=this._toggle.elem;a.parentNode.removeChild(a),this._map=void 0}}var $r=B('<a class="underline text-purple"target=_blank rel=noreferrer> '),Tr=B("<div class=features-properties>"),Mr=B("<div><span><strong></strong><span> (<!>)</span></span><table><tbody><tr><td>id</td><td>"),Or=B("<tr><td></td><td>"),Ar=B('<div class="w-1/2 h-full w-full p-2 flex flex-col"><button type=button class=btn-primary>Copy to clipboard</button><textarea readonly class="text-xs font-mono p-2 border mt-4 w-full overflow-x-scroll overflow-y-scroll flex-1">'),Pr=B("<div class=hidden>"),Ir=B('<div class="h-full w-full flex">'),Lr=B('<div class="font-bold text-red"><a class=underline href=https://docs.protomaps.com/basemaps/downloads#current-version>See Docs.'),Er=B('<div class="absolute bottom-0 p-1 text-xs bg-white bg-opacity-50"> z@<div class="hidden lg:block font-bold">Drag .pmtiles here to view'),kr=B('<div class="absolute p-8 flex justify-center items-center bg-white bg-opacity-50 font-mono text-red">'),Br=B('<div class="flex-1 font-mono">Dropped file '),jr=B('<button class="btn-primary bg-gray text-black"type=button>close'),Rr=B('<input class="border-2 border-gray p-1 flex-1 text-xs lg:text-base"type=text name=tiles autocomplete=off>'),Nr=B("<button class=btn-primary type=submit>load"),Hr=B('<select><option value="">main'),Dr=B('<div class="flex flex-col h-dvh w-full"><div class="max-w-[1500px] mx-auto"><form class="flex space-x-2"><button class=btn-primary type=submit>fit bounds</button></form><div class="flex my-2 space-y-2 lg:space-y-0 space-x-2 flex-col lg:flex-row items-center"><div class="flex items-center"><label for=flavorName class="text-xs mr-1">flavor</label><select id=flavorName autocomplete=on><option value=light>light</option><option value=dark>dark</option><option value=white>data viz (white)</option><option value=grayscale>data viz (grayscale)</option><option value=black>data viz (black)</option></select></div><div class="flex items-center"><label for=lang class="text-xs mr-1">language</label><select id=lang autocomplete=on></select></div><div class="hidden lg:inline"><input id=localSprites type=checkbox><label for=localSprites class="text-xs ml-1">local sprites</label></div><div class="hidden lg:inline"><input id=showBoxes type=checkbox><label for=showBoxes class="text-xs ml-1">bboxes</label></div><button type=button class="btn-primary hidden lg:inline"></button></div></div><div class="h-full flex grow-1">'),Fr=B("<option> (<!>)"),zr=B("<button class=btn-primary type=button>style version"),Gr=B("<option>");const Vr=5,Et="https://demo-bucket.protomaps.com/v4.pmtiles",qr='<a href="https://github.com/protomaps/basemaps">Protomaps</a> © <a href="https://openstreetmap.org">OpenStreetMap</a>';function Ur(n){return"source-layer"in n&&n["source-layer"]?n["source-layer"]:""}const Kr=n=>Number(BigInt(n)&(BigInt(1)<<BigInt(44))-BigInt(1)),Jr=n=>{const a=BigInt(n)>>BigInt(44)&BigInt(3);return a===BigInt(1)?"node":a===BigInt(2)?"way":a===BigInt(3)?"relation":"not_osm"},Wr=n=>{if(n){const a=Jr(n);if(a!=="not_osm"){const c=Kr(n);return(()=>{var i=$r(),d=i.firstChild;return tr(i,"href",`https://openstreetmap.org/${a}/${c}`),$(i,a,d),$(i,c,null),i})()}}return n},Zr=n=>(()=>{var a=Tr();return $(a,U(Je,{get each(){return n.features},children:c=>(()=>{var i=Mr(),d=i.firstChild,b=d.firstChild,v=b.nextSibling,x=v.firstChild,T=x.nextSibling;T.nextSibling;var D=d.nextSibling,J=D.firstChild,W=J.firstChild,Q=W.firstChild,j=Q.nextSibling;return $(b,()=>Ur(c.layer)),$(v,()=>c.geometry.type,T),$(j,()=>Wr(c.id)),$(J,U(Je,{get each(){return Object.entries(c.properties)},children:([V,q])=>(()=>{var R=Or(),re=R.firstChild,g=re.nextSibling;return $(re,V),$(g,q),R})()}),null),i})()})),a})();function ot(n,a,c,i,d,b,v){const x={version:8,sources:{},layers:[]};if(!d||!i)return x;let T;return v?T=`pmtiles://${v.source.getKey()}`:er(d)?T=`pmtiles://${d}`:T=d,x.layers=[],a?x.sprite=`${location.protocol}//${location.host}/${c}`:x.sprite=`https://protomaps.github.io/basemaps-assets/sprites/v4/${c}`,x.glyphs="https://protomaps.github.io/basemaps-assets/fonts/{fontstack}/{range}.pbf",x.sources={protomaps:{type:"vector",attribution:qr,url:T}},b&&b.length>0?x.layers=x.layers.concat(b):x.layers=x.layers.concat(sr("protomaps",i,{lang:n})),x}function Yr(n){const a=lt(()=>JSON.stringify(ot(n.lang,!1,n.flavorName,n.flavor,n.tiles),null,4));return(()=>{var c=Ar(),i=c.firstChild,d=i.nextSibling;return i.$$click=()=>{navigator.clipboard.writeText(a())},$(d,a),c})()}function Xr(n){let a,c,i,d;const[b,v]=G(),[x,T]=G(),[D,J]=G(),[W,Q]=G(0),[j,V]=G("");Xn(()=>{var r;if((r=n.ref)==null||r.call(n,{fit:R}),ne.getRTLTextPluginStatus()==="unavailable"&&ne.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!0),!a){console.error("Could not mount map element");return}const g=new ir({metadata:!0});J(g),ne.addProtocol("pmtiles",g.tile);const f=new ne.Map({hash:"map",container:a,style:ot("en",!1,n.flavorName,n.flavor),attributionControl:!1});f.addControl(new ne.NavigationControl),f.addControl(new ne.GlobeControl),f.addControl(new ne.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,fitBoundsOptions:{animate:!1}})),f.addControl(new ne.AttributionControl({compact:!1})),f.addControl(new ct({popup:new ne.Popup({closeButton:!1,closeOnClick:!1})}));const S=new ne.Popup({closeButton:!0,closeOnClick:!1,maxWidth:"none"});f.on("load",()=>{f.resize()}),f.on("error",o=>{v(o.error.message)}),f.on("idle",()=>{Q(f.getZoom()),v(void 0),q().then(o=>{var l;if(o!=null&&o.metadata){const u=o.metadata;T(`tiles@${u.version} ${(l=u["planetiler:osm:osmosisreplicationtime"])==null?void 0:l.substr(0,10)}`)}})});const E=o=>{const l=f.queryRenderedFeatures(o.point);i&&l.length?(i.innerHTML="",Bt(()=>U(Zr,{features:l}),i),S.setHTML(i.innerHTML),S.setLngLat(o.lngLat),S.addTo(f)):S.remove()};f.on("contextmenu",o=>{E(o)}),f.on("touchstart",o=>{d=setTimeout(()=>{E(o)},500)});const O=()=>{clearTimeout(d)};return f.on("zoom",o=>{Q(o.target.getZoom())}),f.on("touchend",O),f.on("touchcancel",O),f.on("touchmove",O),f.on("pointerdrag",O),f.on("pointermove",O),f.on("moveend",O),f.on("gesturestart",O),f.on("gesturechange",O),f.on("gestureend",O),c=f,()=>{J(void 0),ne.removeProtocol("pmtiles"),f.remove()}});const q=async()=>{var f;if(!n.droppedArchive&&((f=n.tiles)!=null&&f.endsWith(".json"))){const E=await(await fetch(n.tiles)).json();return{metadata:E,bounds:[[E.bounds[0],E.bounds[1]],[E.bounds[2],E.bounds[3]]]}}const g=D();if(g){let S=n.droppedArchive;if(S?g.add(S):n.tiles&&(S=g.tiles.get(n.tiles),S||(S=new jt(n.tiles),g.add(S))),S){const E=await S.getMetadata(),O=await S.getHeader();return{metadata:E,bounds:[[O.minLon,O.minLat],[O.maxLon,O.maxLat]]}}}},R=async()=>{var f;const g=(f=await q())==null?void 0:f.bounds;g&&(c==null||c.fitBounds(g,{animate:!1}))},re=lt(()=>ot(n.lang,n.localSprites,n.flavorName,n.flavor,n.tiles,n.npmLayers,n.droppedArchive));return Le(()=>{const g=n.npmVersion?+n.npmVersion.split(".")[0]:Vr;q().then(f=>{if(f&&f.metadata instanceof Object&&"version"in f.metadata){const S=+f.metadata.version.split(".")[0];Qn[S].indexOf(g)<0?V(`style v${g} may not be compatible with tileset v${S}. `):V("")}})}),Le(()=>{c&&(c.showTileBoundaries=n.showBoxes,c.showCollisionBoxes=n.showBoxes)}),Le(()=>{c&&c.setStyle(re())}),[(()=>{var g=Pr(),f=i;return typeof f=="function"?Ot(f,g):i=g,g})(),(()=>{var g=Ir(),f=a;return typeof f=="function"?Ot(f,g):a=g,g})(),(()=>{var g=Er(),f=g.firstChild,S=f.nextSibling;return $(g,x,f),$(g,()=>W().toFixed(2),S),$(g,U(Se,{get when(){return j()},get children(){var E=Lr(),O=E.firstChild;return $(E,j,O),E}}),null),g})(),U(Se,{get when(){return b()},get children(){var g=kr();return $(g,b),g}})]}function Qr(){const n=Jn(location.hash),[a,c]=G(n.flavorName||"light"),[i,d]=G(n.lang||"en"),[b,v]=G(n.tiles||Et),[x,T]=G(n.local_sprites==="true"),[D,J]=G(n.show_boxes==="true"),[W,Q]=G(!1),[j,V]=G(n.npm_version),[q,R]=G([]),[re,g]=G([]),[f,S]=G(),[E,O]=G();Le(()=>{const m={flavorName:a(),lang:i(),tiles:f()||b()===Et?void 0:b(),local_sprites:x()?"true":void 0,show_boxes:D()?"true":void 0,npm_version:j()?j():void 0};location.hash=Wn(location.hash,m)});const r=()=>rr(a()),o=m=>{m.preventDefault(),m.dataTransfer&&S(new jt(new nr(m.dataTransfer.files[0])))},l=m=>(m.preventDefault(),!1),u=m=>{const P=m.charCode;P>=49&&P<=53&&c(["light","dark","white","grayscale","black"][P-49])},h=m=>{m.preventDefault();const k=new FormData(m.target).get("tiles");typeof k=="string"&&v(k)},y=async m=>{const P=await fetch(`https://registry.npmjs.org/${m}`,{headers:{Accept:"application/vnd.npm.install-v1+json"}});return Object.keys((await P.json()).versions)},C=async()=>{const m=await y("protomaps-themes-base"),P=await y("@protomaps/basemaps");R([...m,...P].sort().filter(k=>+k.split(".")[0]>=2).reverse())};Le(()=>{(async()=>{const m=j();g(m===void 0||m===""?[]:await Zn(m,a()))})()}),At.sort((m,P)=>m.full_name.localeCompare(P.full_name));const ee=()=>{var m;(m=E())==null||m.fit()},se=()=>{S(void 0)};return(()=>{var m=Dr(),P=m.firstChild,k=P.firstChild,de=k.firstChild,Ee=k.nextSibling,ke=Ee.firstChild,We=ke.firstChild,Be=We.nextSibling,je=ke.nextSibling,M=je.firstChild,ye=M.nextSibling,Re=je.nextSibling,Z=Re.firstChild,Ce=Re.nextSibling,$e=Ce.firstChild,we=Ce.nextSibling,ae=P.nextSibling;return $(m,U(Yn,{page:0}),P),k.addEventListener("submit",h),$(k,U(Se,{get when(){return f()},get children(){return[(()=>{var w=Br();return w.firstChild,$(w,()=>{var F;return(F=f())==null?void 0:F.source.getKey()},null),w})(),(()=>{var w=jr();return w.$$click=se,w})()]}}),de),$(k,U(Se,{get when(){return!f()},get children(){return[(()=>{var w=Rr();return be(()=>w.value=b()),w})(),Nr()]}}),de),de.$$click=ee,Be.addEventListener("change",w=>c(w.target.value)),ye.addEventListener("change",w=>d(w.target.value)),$(ye,U(Je,{each:At,children:w=>(()=>{var F=Fr(),ce=F.firstChild,Ne=ce.nextSibling;return Ne.nextSibling,$(F,()=>w.lang,ce),$(F,()=>w.full_name,Ne),be(()=>F.value=w.lang),F})()})),Z.addEventListener("change",w=>T(w.currentTarget.checked)),$e.addEventListener("change",w=>J(w.currentTarget.checked)),$(Ee,U(Se,{get when(){return q().length>0},get fallback(){return(()=>{var w=zr();return w.$$click=C,w})()},get children(){var w=Hr();return w.firstChild,w.addEventListener("change",F=>V(F.target.value)),$(w,U(Je,{get each(){return q()},children:F=>(()=>{var ce=Gr();return ce.value=F,$(ce,F),ce})()}),null),be(()=>w.value=j()),w}}),we),we.$$click=()=>Q(!W()),$(we,()=>W()?"Close style JSON":"Get style JSON"),ae.addEventListener("drop",o),ae.addEventListener("dragover",l),ae.addEventListener("keypress",u),$(ae,U(Xr,{ref:O,get tiles(){return b()},get localSprites(){return x()},get showBoxes(){return D()},get flavorName(){return a()},get flavor(){return r()},get lang(){return i()},get npmLayers(){return re()},get npmVersion(){return j()},get droppedArchive(){return f()}}),null),$(ae,U(Se,{get when(){return W()},get children(){return U(Yr,{get flavorName(){return a()},get flavor(){return r()},get lang(){return i()},get tiles(){return lt(()=>!!f())()?"example.pmtiles":b()}})}}),null),be(()=>Be.value=a()),be(()=>ye.value=i()),be(()=>Z.checked=x()),be(()=>$e.checked=D()),m})()}const kt=document.getElementById("root");kt&&Bt(()=>U(Qr,{}),kt);Kn(["click"]);
